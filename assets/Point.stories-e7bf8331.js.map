{"version":3,"file":"Point.stories-e7bf8331.js","sources":["../../packages/Point/texture/point.png","../../packages/Point/index.ts","../../src/stories/components/point/index.vue"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAAXNSR0IArs4c6QAABP1JREFUWAnNWE1Mo0UYpruFTYC0upC1VGlAcBcrAhckKO3NAwGbCBwMxMCBZDcS4cK1ySa9ciEGIwkXYrbxQDkghIM3ihLlwp8rGhDCT4sGWLcBEoFdfJ7yDQ4fMwXquumXTGfmnfd95ul8M++872dJS+I5OTnJg5kPxYPyOorTKKjSIkbZRB1GGbFYLFHU13osV9UGmVvQvY/SfHh4+O7y8vLjmZmZX9fX15+srq7GlpaWnmLMUlxcbCsoKLDl5+e/WlFRca+oqMidkZExj7EgSj9I/o360udSYiB0AygtKAGQeTo8PBweGhr6HeSeX4oOBZC60dTU9GZDQ4MHJO0Q+VEegWBC+4TEQMoFkNDW1tbtgYGBb0Oh0Cr6ST+NjY0F7e3tHzkcjl2ANILcmg5MSwykPkAJjY2N/eD3+yd0AMnIA4GAt66u7n0QI7nvVRhKYiD0ydHR0Vd9fX3BwcHB31SG/1XW2tp6t6Ojozk9Pf0ByH1jxrtAjCsFUmPd3d1fTkxM/Gk2eJF9r9d7p6en5zOQqzOv3DliIOVC+am3t3f4spWy2WxWl8uV5XQ6szIzM9OxyW+SNA7Fs4ODg6NIJLK/tra2H4vFjhP9mba2tnudnZ0fg9h7KGd77owYCPH0/Tg6OrqeaE9lZ2ffhBvIASlbognFGMjF4FZ29vb2ngmZueaeq6+vz4e8CuTip1Um9ilO38Pa2tovzIaiX1hYmFVZWfma1Wrln7jyc3x8/Hx6evqPlZWVfZ3R+Pj45zitD0Hsa+rEJ8Bq0XkG6BJ0hmVlZa9UV1fnXZcU8WhDW2Lo8I25AwaXU2JQvk/nqfNTXKnS0tJcHehV5cQglkqfc5MDuXBcvJIWenSVAfcUX59qLBkZsYipsjU4NHPMgqXLw0la8ng8ftU1U1NTcyfRRseRd5eUlLyNyW4TEJt8d3Fx8Re4msfsqx4eiMnJyQuuiNdXOBwOoC62wtCHC/hnFSnDJShPX05OTqbP5/swNzf3DXlyu93uqKqqcuBefGtkZOS7nZ2dA3mcbf5RPLtmV0IO5OJ2u318lV4cZ6V3p58yg4q+ipQYY03C1JFlcluHPTs7Sy5eEnNubGw8kY1Em85TtOWar8+8UvK4aFOHuqIv1zpshlHQc8aJMZ6SjUSbHl205Zp7Su4naut0ddgGl1NiRpB3AV9cM+YBsdHNclVfp6vDNrjEiZ0A8OwGUIG/ZBm5xO/HKMNh1eQ4Jcr7jS5Bpa+S6XR12AaXKPdYhDG6CpRRgkpOP6WSq2Q6XR22wSVCYptMHFSgDF1UcjrP7e3tDdWYLKOOztHqsA0umyQWLi8vvysDijbjKdE213SeichxjDpmO9HXYTOzgk44da8kxD9R3JfzTLGCweCS+EeiZpAHZ5itC3f4qnSvS2DINWMzYsoy0SYHuJF5cuKr5BNk3nfaPP/LyJNB3nlp8j1iEVOFYHBgYnwW9vQzGWXepzJg5LmwsLCtGruOjBi6KJZzGwlxPzHjK4alY9ruZzKqm2hubu6vqampKF+FTkcnpw1tiaHTMeb2G1z+9fjYZySZeskI/wnIvfT0jYlvV1dXA1ZKnb6JJQa51Et4JXKp94lAIpd6H1Ukcqn3GUoix9OaWh/uBDnWOBTM1pmMtiCWKmU2wySG+YL0qTMN8ZRdfOpkcID+O7hmFmD3COXFfeoE2IUHJP/3j8P/AChL8P5SmZalAAAAAElFTkSuQmCC\"","import * as THREE from 'three'\nimport imgSrc from './texture/point.png'\n\nconst createPointTag = (size: number = 60, color: string = '#ffffff') => {\n  const spriteMaterial = new THREE.SpriteMaterial({\n    map: new THREE.TextureLoader().load(imgSrc),\n    transparent: true,\n    color: new THREE.Color(color)\n  });\n  const sprite = new THREE.Sprite(spriteMaterial);\n  sprite.scale.set(size, size, 1);\n\n  let s = 0.0;\n  const waveAnimation = () => {\n    s += 0.01;\n    if (s < 0.5) {\n      sprite.scale.x = size * (1 + s);\n      sprite.scale.y = size * (1 + s);\n    } else if (s >= 0.5 && s < 1.0) {\n      sprite.scale.x = size * (2 - s);\n      sprite.scale.y = size * (2 - s);\n    } else {\n      s = 0.0;\n    }\n    requestAnimationFrame(() => waveAnimation());\n  };\n  \n  waveAnimation()\n  return sprite;\n};\n\nexport { createPointTag }\n","<template>\n  <div id=\"Point\"></div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, onBeforeUpdate, watch, onBeforeMount } from 'vue';\nimport * as THREE from 'three'\nimport { scene, renderer, camera } from '../basic/three'\n// import { controls } from '../basic/controls'\nimport { createPointTag } from '../../../../packages/index'\n\nconst props = defineProps({\n  size: {\n    type: Number,\n    default: 60,\n    required: false\n  },\n  color: {\n    type: String,\n    default: '#ffffff',\n    required: false\n  }\n})\n\nlet timer: any = null\n\nonBeforeMount(() => {\n  if (timer) cancelAnimationFrame(timer)\n  scene.remove.apply(scene, scene.children)\n})\n\nonMounted(() => {\n  camera.zoom = 1;\n  const PointTag = createPointTag(props.size, props.color)\n  PointTag.position.z = 0\n  scene.add( PointTag );\n  const axesHelper = new THREE.AxesHelper(5000);\n  // scene.add(axesHelper);\n  const PointElement = document.getElementById('Point')\n  if (PointElement) PointElement.appendChild(renderer.domElement)\n  const render = () => {\n    renderer.render(scene, camera)\n    camera.updateProjectionMatrix()\n    // controls.update()\n    timer = requestAnimationFrame(render)\n  }\n\n  render()\n})\n\nonBeforeUpdate(() => {\n  console.log('onBeforeUpdate')\n  renderer.clear()\n  scene.remove.apply(scene, scene.children)\n  scene.remove.apply(scene, scene.children)\n  renderer.forceContextLoss()\n  cancelAnimationFrame(timer)\n  const gl = renderer.domElement.getContext('webgl')\n  gl && gl.getExtension('WEBGL_lose_context')?.loseContext()\n})\n</script>"],"names":["imgSrc","createPointTag","__name","size","color","spriteMaterial","THREE.SpriteMaterial","THREE.TextureLoader","THREE.Color","sprite","THREE.Sprite","s","waveAnimation","timer","onBeforeMount","scene","onMounted","camera","PointTag","props","THREE.AxesHelper","PointElement","renderer","render","onBeforeUpdate","gl","_a"],"mappings":"wPAAA,MAAeA,EAAA,6xDCGTC,EAAiBC,EAAA,CAACC,EAAe,GAAIC,EAAgB,YAAc,CACjE,MAAAC,EAAiB,IAAIC,EAAqB,CAC9C,IAAK,IAAIC,IAAsB,KAAKP,CAAM,EAC1C,YAAa,GACb,MAAO,IAAIQ,EAAYJ,CAAK,CAAA,CAC7B,EACKK,EAAS,IAAIC,EAAaL,CAAc,EAC9CI,EAAO,MAAM,IAAIN,EAAMA,EAAM,CAAC,EAE9B,IAAIQ,EAAI,EACR,MAAMC,EAAgBV,EAAA,IAAM,CACrBS,GAAA,IACDA,EAAI,IACCF,EAAA,MAAM,EAAIN,GAAQ,EAAIQ,GACtBF,EAAA,MAAM,EAAIN,GAAQ,EAAIQ,IACpBA,GAAK,IAAOA,EAAI,GAClBF,EAAA,MAAM,EAAIN,GAAQ,EAAIQ,GACtBF,EAAA,MAAM,EAAIN,GAAQ,EAAIQ,IAEzBA,EAAA,EAEgB,sBAAA,IAAMC,GAAe,CAAA,EAXvB,iBAcR,OAAAA,IACPH,CACT,EA1BuB,4KCqBvB,IAAII,EAAa,KAEjB,OAAAC,EAAc,IAAM,CACdD,GAAO,qBAAqBA,CAAK,EACrCE,EAAM,OAAO,MAAMA,EAAOA,EAAM,QAAQ,CAAA,CACzC,EAEDC,EAAU,IAAM,CACdC,EAAO,KAAO,EACd,MAAMC,EAAWjB,EAAekB,EAAM,KAAMA,EAAM,KAAK,EACvDD,EAAS,SAAS,EAAI,EACtBH,EAAM,IAAKG,CAAS,EACD,IAAIE,EAAiB,GAAI,EAEtC,MAAAC,EAAe,SAAS,eAAe,OAAO,EAChDA,GAA2BA,EAAA,YAAYC,EAAS,UAAU,EAC9D,MAAMC,EAASrB,EAAA,IAAM,CACVoB,EAAA,OAAOP,EAAOE,CAAM,EAC7BA,EAAO,uBAAuB,EAE9BJ,EAAQ,sBAAsBU,CAAM,CAAA,EAJvB,UAORA,GAAA,CACR,EAEDC,EAAe,IAAM,OACnB,QAAQ,IAAI,gBAAgB,EAC5BF,EAAS,MAAM,EACfP,EAAM,OAAO,MAAMA,EAAOA,EAAM,QAAQ,EACxCA,EAAM,OAAO,MAAMA,EAAOA,EAAM,QAAQ,EACxCO,EAAS,iBAAiB,EAC1B,qBAAqBT,CAAK,EAC1B,MAAMY,EAAKH,EAAS,WAAW,WAAW,OAAO,EACjDG,KAAMC,EAAAD,EAAG,aAAa,oBAAoB,IAApC,MAAAC,EAAuC,cAAY,CAC1D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}